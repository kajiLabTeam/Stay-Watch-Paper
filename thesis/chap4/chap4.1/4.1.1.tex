



\subsection*{4.1.1 サーバの設計と構築}
サーバ側には独立したバックエンドシステムとの連携が容易でありWebアプリケーションがより高い可用性とスケーラビリティを実現できるREST APIを採用した．
REST APIは、複数のクライアントからアクセスができるため，様々なデバイスやプラットフォームからアクセスできる。
これにより、より広いユーザー層からアクセスができる．
既存の滞在ウォッチのサーバ側のシステムはPythonを用いて構築されていた．Web APIは大量の処理をする必要があり，
Pythonの実行速度の遅さが，高負荷環境でパフォーマンスに影響を与える可能性があった．
またデフォルトで非同期プログラミンをサポートしていないため，
非同期処理に対応するために追加のライブラリを使用する必要がある．また動的型付け言語なため，型の不明確さによってバグが見つけづらく保守性が低い．
そこで静的型付けであり，高速な処理能力と小さなメモリフットプリントを持つため、Web APIの開発に適しているGolangを採用した．
Golangは高いパフォーマンスを持つ．C言語のような低レベルな言語と
同等のパフォーマンスを持ちながら，高水準の言語のような簡単な構文を持っているのに加え，並列処理を容易に実現できるため、
高負荷な環境でのWeb APIの開発にも適している。
そのためWebAPIの要求に対応するために必要なパフォーマンスを提供することができる．
また構造体とインターフェース型を備えており，WebAPIの開発に必要な柔軟性を持っている．これにより，開発者は，WebAPIを実装するために適した方法を選択することができる．さらに、標準パッケージによるHTTPサーバのサポートを持つため、Web APIの開発に必要な機能を簡単に実装できる。
サーバで使用するデータベースには無料で利用することができ，高いスケーラビリティを持つため，WebAPIの要求に対応することができるMySQlを採用した．MySQLは多くのプラットフォームでサポートされており，多くの言語に対応しており，開発者にとって選択肢が広がる．またMySQLは優れたセキュリティ機能を持つため、WebAPIのセキュリティの確保ができる．
GolangでMysqlの操作を行う際GolangのORMライブラリであるGormを採用した．
ORMはデータベースを操作を行うための手法の一つである．これにより，データベース操作を行う際に，SQL文を直接記述する必要がなくなり，コードがすっきりし，可読性が高くなる．
SQL分を直接記述しないためSQLインジェクション対策になる．SQLインジェクションとは不正なSLQ文の挿入を行い，データベースに対して攻撃を行う手法である．ORMは，プログラマが入力したデータを自動的にエスコープし，サイバー攻撃につながるような文字を無効化するためSQLインジェクション攻撃を防止できる．
GormはGolang向けORMライブラリの一つである．Gormはデータベースの挿入，更新，削除，検索などの基本的な機能操作をサポートしている．また自動的なマイグレーション機能を持っている．これにより開発者はデータベーススキーマを手動で管理せずに，スキーマの変更を自動的に反映できる．
Gormの他にXormなどの選択肢もあったが複雑なクエリを簡単に作成するための豊富なクエリビルダーAPIを提供しているためGormを選択した．


サーバサイドプログラムのデプロイする際にはプログラムを実行するために必要な全ての環境をコンテナ内にパッケージ行い，
開発環境と本番環境での環境債を最小限に抑えられるDockerを採用した．Dcokerは，コンテナを水平にスケールアウトでき，
これによりアクセスが集中した場合にも，スムーズな処理を行える．
デプロイ先は,研究室内のサーバを利用した．研究室内のサーバの利用はクラウドサービスに比べて，長期的にコストを削減することができる．




